
@{
    ViewData["Title"] = "AlterarSenha";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section HeadStyles {
    <style>
        @@media (max-width: 600px) {
            #form {
                width: 430px !important;
            }
        }

        @@media (max-width: 500px) {
            #form {
                width: 340px !important;
            }
        }

        @@media (max-width: 380px) {
            #form {
                padding: 40px !important;
                width: 280px !important;
            }

            h1{
                font-size: 25px !important;
            }

            #text{
                font-size: 16px !important;
            }
        }
    </style>
}

<div class="d-flex flex-column h-100 justify-content-center align-items-center" style="background-color: #cccccc; overflow: hidden">
    <div id="form" class="bg-white" style="border-radius: 20px; padding: 75px 40px 75px 40px; width: 500px; margin: 80px 0px 80px 0px">
        <div class="d-flex flex-column justify-content-center h-100">
            <h1 class="text-center" style="margin-bottom: 20px; margin-top: 20px; font-size: 35px">Alteração de Senha</h1>
            <p id="text" style="text-align: center; font-size: 18px; margin-bottom: 30px">Digite o email da sua conta para prosseguir</p>
            <span style="text-align: center; margin-bottom: 10px" id="emailError" class="visually-hidden text-danger">Obrigatório informar o email!</span>
            <span style="text-align: center; margin-bottom: 10px" id="invalidError" class="visually-hidden text-danger">Email inválido!</span>
            <div class="col-md-4 w-100">
                <div class="form-group" style="position: relative">
                    <label for="email" class="control-label">Email</label>
                    <input onkeydown="redirectPage(event)" class="form-control" id="email" />
                </div>
                <div class="form-group text-center" style="margin-top: 35px">
                    <input onclick="redirectPage(event)" onkeydown="redirectPage(event)" type="button" value="Confirmar" class="btn btn-primary" style="border-radius: 10px; font-size: 18px; font-weight: 600; padding: 8px 50px 8px 50px" />
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const redirectPage = (e) => {
        const event = e.key || e.type

        const emailMask = (email) => {
            const regex = /.+@@.+\.[A-Za-z]+$/

            if(regex.test(email)){
                return true
            }

            else{
                return false
            }
        }

        if(event == "Enter" || event == "click"){
            const email = document.getElementById("email").value

            const emailError = document.getElementById("emailError")
            const invalidError = document.getElementById("invalidError")

            emailError.classList.add("visually-hidden")
            invalidError.classList.add("visually-hidden")

            if(email != ""){
                if(emailMask(email) == false){
                    invalidError.classList.remove("visually-hidden")
                }
                else{
                    window.location = `ConfirmarSenha?email=${email}`
                }
            }
            else{
                emailError.classList.remove("visually-hidden")
            }
        }
    }
</script>